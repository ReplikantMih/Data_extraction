(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{535:function(i,t,e){"use strict";e.r(t);var n=e(1),s=e.n(n);t.default=new function(){var i=s()(document);this.PERIODICITY=500,this.fields=[],this.validationsResults={},this.json={},this.deferred=s.a.Deferred(),this.add=function(i,t,e){var n={callback:t,get:i,element:e.element,collection:e,namespace:e.namespace};return this.fields.push(n),{freeze:this._freeze.bind(this,n),unfreeze:this._unfreeze.bind(this,n)}},this._freeze=function(i){i.stop=!0},this._unfreeze=function(i){i.stop=!1},this.validate=function(i){var t=i.get(),e=s()(i.element).is(":visible");if(i.stop||t===i.value&&e===i.visible)this.restartCheck();else{i.value=t,i.visible=e;var n=i.callback();n&&(this.validationsResults[n.name]=n),this.restartCheck()}},this.check=function(){0!==this.fields.length?(this.fields.forEach(this.validate,this),this.json.dependantFields&&this.validateDependantFields()):this.restartCheck()},this.restartCheck=function(){this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.check.bind(this),this.PERIODICITY)},this.getMessage=function(i,t){var e=this.json.messages;return e[i]&&e[i][t]?e[i][t]:e._default[t]},this.getConditions=function(i){return this.json.conditions[i]||{}},this.clearFields=function(t){this.fields=this.fields.filter(function(e){var n=t.contains(e.element);return n||i.trigger("HH-Form-RemoveField",{field:e}),n})},this.getFields=function(i){return i?this.fields.filter(function(t){return t.namespace===i}):this.fields},this.getValidationResults=function(){return this.validationsResults},this.clearCache=function(){var i=this.json.dependantFields,t=[i.main,i.secondary];this.fields.filter(function(i){return-1!==t.indexOf(i.collection.name)}).forEach(function(i){i.value=null,i.collection.resetRequiredConditions()})},this.swapMinCount=function(i,t){1===i.mincount&&0===t.mincount||(i.mincount=1,t.mincount=0,this.clearCache())},this.validateDependantFields=function(){var i=this.json.dependantFields,t=this.validationsResults[i.main],e=this.validationsResults[i.secondary];if(t&&e){var n=this.getConditions(i.main),s=this.getConditions(i.secondary);0!==n.validCount||0!==s.validCount?0===t.validCount&&e.validCount>0?this.swapMinCount(s,n):this.swapMinCount(n,s):1!==n.mincount&&1!==s.mincount&&(n.mincount=1,s.mincount=1,this.clearCache())}},this.check()}}}]);
//# sourceMappingURL=3.89a23cd2889bb965e3d8.js.map
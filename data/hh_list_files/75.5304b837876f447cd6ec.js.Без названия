(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{552:function(i,e,t){"use strict";t.r(e);var s=t(1),l=t.n(s),a=t(17),n=t(535);t(116);e.default=new function(){this.init=function(i,e){var t=this;this.$element=l()(i),this.params=e,this.$element.hasClass("HH-Form-Form")?this.$form=this.$element:this.$form=l()(".HH-Form-Form",this.$element),l()(this.infoTemplate).detach(),this.invalidFields=[],this.allFields={},this.isCheckFirstPassed=!1,a.default.add("HH-Form-New",this.doField.bind(this),"*"),l()(document).on("HH-Form-RemoveField",this.removeField.bind(this)),l()(".HH-Form-SubmitButton",this.$element).prop("disabled",!1),this.$form.on("HH-Form-Reset",function(){n.default.getFields(e.namespace).forEach(function(i){i.collection.reset()})}),this.$form.on("submit",function(i,e){e&&e.isValid||(i.preventDefault(),t.checkFormValidation())})},this.checkFormValidation=function(){var i=this,e=[];n.default.getFields(this.params.namespace).forEach(function(i){i.collection.visited=!0,i.collection.async?e.push(i.collection.validateElements()):i.collection.validateElements()}),l.a.when.apply(null,e).done(function(){i.invalidFields.length?i.allFields[i.invalidFields[0]].focusFirstInvalidElement():(Object.keys(i.allFields).forEach(function(e){i.allFields[e].beforeSubmit()}),i.$form.trigger("submit",{isValid:!0}))})},this.doField=function(i){if(!this.params.namespace||i.namespace===this.params.namespace){var e=i.uid;this.allFields[e]=i,this.params.serverValidation&&(this.allFields[e].visited=!0),a.default.add("HH-Form-Collection-Change",this.checkStatus.bind(this,i),i),this.validateField(e)}},this.validateField=function(i){var e={},t=this.allFields[i].element;n.default.getFields(this.params.namespace).forEach(function(i){i.element===t&&(e=i)}),n.default.validate(e)},this.checkStatus=function(i){var e=i.uid,t=this.invalidFields.indexOf(e),s=-1!==t,l=i.isValid;if(l&&s)this.invalidFields.splice(t,1);else if(l||s){if(this.isCheckFirstPassed)return;this.isCheckFirstPassed=!0}else this.invalidFields.push(e);this.invalidFields=this.params.sortByPosition?this.invalidFields.sort(this.sortByPosition.bind(this)):this.invalidFields.sort()},this.sortByPosition=function(i,e){var t=l()(this.allFields[i].element).offset().top,s=l()(this.allFields[e].element).offset().top;return t===s?0:t<s?-1:1},this.removeField=function(i,e){var t=e.field.collection.uid,s=this.invalidFields.indexOf(t);-1!==s&&this.invalidFields.splice(s,1),delete this.allFields[t]}}}}]);
//# sourceMappingURL=75.5304b837876f447cd6ec.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[865],{974:function(e,t,r){"use strict";r.r(t);var o=r(1),n=r.n(o),a=r(57),i=r(3),c=r(78),s=r(55),l=r(19);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=i.default.build({create:function(e,t){var r=n()(e),o=n()(".HH-Search-SavedSearchSubscription-Form",r),f=n()(".HH-Search-SavedSearchSubscription-Email",r),b=e.querySelector(".HH-Search-SavedSearchSubscription-Loading"),v=new s.a(b),g=p(e.querySelectorAll(".HH-Search-SavedSearchSubscription-Toggle")),h=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({mobile:void 0,sticky:void 0,collapsed:void 0},t.cssClasses),S=t.visible;o.on("submit",function(o,n){if(o.preventDefault(),n&&n.isValid){var s=f.length>0?"".concat(t.url,"&email=").concat(encodeURIComponent(f.val())):t.url;v.start(),a.default.post(s).then(function(){r.trigger("Bloko-StateChanger-Action",{action:"swap",target:"success"}),v.stop()}).catch(function(o){var n,a,s;"WrongEmail"===(null===(n=o.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.state)?f.trigger("HH-ChangableError-Add",{fieldName:"email",error:"invalid"}):409===(null===(s=o.response)||void 0===s?void 0:s.status)?r.trigger("Bloko-StateChanger-Action",{action:"swap",target:"auth-required"}):i.default.make(c.default,e,{content:t.trl.error,type:"error"}),v.stop()})}}),g.forEach(function(r){r.addEventListener("click",function(){(S=!S)?e.classList.remove(t.cssClasses.collapsed):(e.classList.add(t.cssClasses.collapsed),a.default.post(t.collapseUrl).catch(console.error))})}),l.default.mobile()&&h.mobile?e.classList.add(h.mobile):(h.sticky&&e.classList.add(h.sticky),!t.visible&&h.collapsed&&e.classList.add(h.collapsed)),e.classList.remove("g-hidden")},componentName:"HH/Search/SavedSearchSubscription"})}}]);
//# sourceMappingURL=865.b265bcec466433ebd6c5.js.map